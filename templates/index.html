<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>IntelliChat</title>

<style>

/* RESET */
*{
margin:0;
padding:0;
box-sizing:border-box;
}

/* BODY */
body{
font-family:Segoe UI, Tahoma, sans-serif;
background:linear-gradient(135deg,#2563EB,#14B8A6);
height:100vh;
display:flex;
justify-content:center;
align-items:center;
}

body.dark{
background:#0F172A;
}

/* CONTAINER */
.chat-container{
width:100%;
max-width:800px;
height:90vh;
background:white;
border-radius:20px;
display:flex;
flex-direction:column;
overflow:hidden;
box-shadow:0 0 30px rgba(0,0,0,0.3);
}

body.dark .chat-container{
background:#111827;
}

/* HEADER */
.chat-header{
background:linear-gradient(135deg,#2563EB,#14B8A6);
color:white;
padding:20px;
text-align:center;
}

body.dark .chat-header{
background:#020617;
}

/* CHAT AREA */
.chat-messages{
flex:1;
overflow-y:auto;
padding:20px;
background:#F3F4F6;
}

body.dark .chat-messages{
background:#0F172A;
}

/* MESSAGES */
.message{
margin-bottom:15px;
display:flex;
}

.message.user{
justify-content:flex-end;
}

.message-content{
max-width:70%;
padding:15px;
border-radius:18px;
}

/* USER */
.message.user .message-content{
background:#2563EB;
color:white;
}

/* BOT */
.message.bot .message-content{
background:#E5E7EB;
color:#020617;
}

body.dark .message.bot .message-content{
background:#1E293B;
color:white;
}

/* EXTRAS */
.timestamp{
font-size:10px;
opacity:0.7;
margin-top:5px;
}

.copyBtn{
border:none;
background:none;
cursor:pointer;
font-size:12px;
margin-top:5px;
}

/* INPUT */
.chat-input-container{
padding:20px;
border-top:1px solid #ddd;
display:flex;
gap:10px;
background:white;
}

body.dark .chat-input-container{
background:#111827;
border-top:1px solid #1E293B;
}

input{
flex:1;
padding:12px;
border-radius:20px;
border:2px solid #14B8A6;
outline:none;
}

/* BUTTONS */
button{
padding:12px 20px;
border:none;
border-radius:20px;
cursor:pointer;
background:#14B8A6;
color:white;
font-weight:bold;
}

/* TOGGLE */
#themeToggle{
margin-top:10px;
padding:6px 12px;
border-radius:20px;
background:white;
color:black;
cursor:pointer;
}

/* SPINNER */
.typing-indicator{
display:none;
padding:10px;
}

.spinner{
width:25px;
height:25px;
border:4px solid #ccc;
border-top:4px solid #14B8A6;
border-radius:50%;
animation:spin 1s linear infinite;
}

@keyframes spin{
100%{transform:rotate(360deg);}
}

</style>
</head>

<body>

<div class="chat-container">

<div class="chat-header">
<h2>ðŸ¤– IntelliChat</h2>
<p>Your Intelligent AI Companion</p>
<button id="themeToggle">ðŸŒ™</button>
</div>

<div class="chat-messages" id="chatMessages">

<div class="message bot">
<div style="display:flex;gap:8px;">
<div>ðŸ¤–</div>
<div class="message-content">
Hello! I'm your AI assistant. How can I help you today?
</div>
</div>

<div class="typing-indicator" id="typingIndicator">
<div class="spinner"></div>
</div>

</div>

<div class="chat-input-container">
<input id="userInput" type="text" placeholder="Type your message...">
<button id="sendBtn">Send</button>
</div>

</div>

<script>
document.addEventListener("DOMContentLoaded", () => {

const input = document.getElementById("userInput");
const sendBtn = document.getElementById("sendBtn");
const chatBox = document.getElementById("chatMessages");

function addMessage(text, type){
    const div = document.createElement("div");
    div.className = "message " + type;
    div.innerHTML = `
        <div style="display:flex;gap:8px;">
            <div>${type === "user" ? "ðŸ‘¤" : "ðŸ¤–"}</div>
            <div class="message-content">${text}</div>
        </div>
    `;
    chatBox.appendChild(div);
    chatBox.scrollTop = chatBox.scrollHeight;
}

async function sendMessage(){

    const msg = input.value.trim();
    if(msg === "") return;

    addMessage(msg,"user");
    input.value = "";

    try{
        const res = await fetch("/chat",{
            method:"POST",
            headers:{ "Content-Type":"application/json" },
            body: JSON.stringify({ message: msg })
        });

        const data = await res.json();
        addMessage(data.response,"bot");

    }catch(err){
        addMessage("âŒ Cannot connect to backend","bot");
    }
}

sendBtn.addEventListener("click", sendMessage);

input.addEventListener("keypress", e=>{
    if(e.key === "Enter"){
        sendMessage();
    }
});

});
</script>


</body>
</html>
